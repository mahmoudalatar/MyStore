<div *ngIf="!done">
  <div class="cart-container" *ngIf="items != ''">
    <div class="cart-item-details">
      <div class="cart-item" *ngFor="let data of items">
        <div class="left">
          <a routerLink="/item-details/ {{ data['id'] }}">
            <img class="product-image" [src]="data['url']" alt="" />
          </a>
        </div>
        <div class="cart-item-details">
          <p>
            <label for="item">{{ data["name"] }}</label>
          </p>
          <p>{{ data["price"] }}</p>
          <label for="item">Amount: </label>
          <input
            min="0"
            class="number-input"
            type="number"
            [(ngModel)]="data['number']"
            (ngModelChange)="value($event, data['name'])"
            name="prodct-item"
            id="item"
          />
        </div>
        <!-- (ngModelChange)="value($any($event.target).value, data['name'])" -->
      </div>
      <h2>Total: $ {{ totalCost | number : "1.2-2" }}</h2>
    </div>
    <div class="cart-panel">
      <form #form="ngForm" (ngSubmit)="onSubmit()">
        <label for="name">Full name</label>
        <input
          type="text"
          required
          minlength="3"
          placeholder="(minimum 3 characters)"
          id="name"
          name="name"
          [(ngModel)]="fullName"
        />
        <label for="address">Address</label>
        <input
          type="text"
          required
          minlength="6"
          placeholder="(minimum 6 characters)"
          id="address"
          name="address"
          [(ngModel)]="address"
        />
        <label for="card">Credit card number</label>
        <input
          type="text"
          required
          minlength="16"
          maxlength="17"
          placeholder="(16-digit number)"
          id="card"
          name="card"
          [(ngModel)]="creditCard"
          oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
        />
        <button [disabled]="form.invalid" type="submit">Submit</button>
      </form>
    </div>
  </div>
  <div class="empty-cart-message" *ngIf="items == ''">
    <h1>Cart is empty</h1>
  </div>
  <!-- <p>{{ items | json }}</p> -->
</div>

<div *ngIf="done">
  <h1>success ðŸŽ‰ðŸŽ‰</h1>
  <p>thank you {{ fullName }}</p>
  <p>your {{ totalCost }} order is conformed!</p>
  <p>please allow 1-3 business day(s) for shipping</p>
  <button><a routerLink="/"> back to product list</a></button>
</div>
